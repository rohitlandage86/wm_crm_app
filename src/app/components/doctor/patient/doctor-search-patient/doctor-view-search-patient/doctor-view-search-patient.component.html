<c-row class="m-0">
  <c-col xs="12 " class="p-0">
    <c-card class="">
      <c-card-header>
        <strong>View Consultation</strong>
      </c-card-header>
      <c-card-body>
        <form cForm class="row g-3" >
          <div class="">
            <form cForm class="row g-3">
              <c-col md="2" class="p-2">
                <label class="fw-bold" cLabel for="mrno_entity_series">MR No Entity Series </label><br>
                <label cLabel for="mrno_entity_series">{{patientDetails.mrno_entity_series}} </label>
              </c-col>
              <c-col md="2" class="p-2">
                <label class="fw-bold" cLabel for="registration_date">Registration Date </label><br>
                <label cLabel for="registration_date">{{patientDetails.registration_date|date:'dd-MM-YYYY'}} </label>
              </c-col>
              <c-col md="4" class="p-2">
                <label class="fw-bold" cLabel for="patient_name">Patient Name </label><br>
                <label cLabel for="patient_name">{{patientDetails.patient_name}} </label>
              </c-col>
              <c-col md="2" class="p-2">
                <label class="fw-bold" cLabel for="mobile_no">Mobile Number </label><br>
                <label cLabel for="mobile_no">{{patientDetails.mobile_no}} </label>
              </c-col>
              <c-col md="2" class="p-2">
                <label class="fw-bold" cLabel for="validationDefault01">Gender</label><br>
                <label cLabel for="gender">{{patientDetails.gender}} </label>

              </c-col>
              <c-col md="2" class="p-2">
                <label class="fw-bold" cLabel for="age">Age </label> <br>
                <label cLabel for="age">{{patientDetails.age}} </label>
              </c-col>
              <c-col md="2" class="p-2">
                <label class="fw-bold" cLabel for="address">Address </label><br>
                <label cLabel for="address">{{patientDetails.address}} </label>
              </c-col>
              <c-col md="2" class="p-2">
                <label class="fw-bold" cLabel for="validationDefault01">City </label><br>
                <label cLabel for="city">{{patientDetails.city}} </label>
              </c-col>
              <c-col md="2" class="p-2">
                <label class="fw-bold" for="state_id" cLabel> State </label><br>
                <label cLabel for="gender">{{patientDetails.state_name}} </label>
              </c-col>
              <c-col md="2" class="p-2">
                <label class="fw-bold" cLabel for="validationDefault01">Height (cm) </label> <br>
                <label cLabel for="height">{{patientDetails.height}} </label>
              </c-col>
              <c-col md="2" class="p-2">
                <label class="fw-bold" cLabel for="validationDefault01">Weight (kg) </label> <br>
                <label cLabel for="weight">{{patientDetails.weight}} </label>
              </c-col>
              <c-col md="2" class="p-2">
                <label class="fw-bold" cLabel for="bmi">BMI (kg/mÂ²) </label> <br>
                <label cLabel for="bmi">{{patientDetails.bmi}} </label>
              </c-col>
              <c-col md="2" class="p-2">
                <label class="fw-bold" for="source_of_patient_id" cLabel> Source Of Patient </label> <br>
                <label cLabel for="source_of_patient_name">{{patientDetails.source_of_patient_name}} </label>
              </c-col>
              <c-col md="2" class="p-2 m-9">
                <label class="fw-bold" for="refered_by_id" cLabel> Refered By </label> <br>
                <label cLabel for="gender">{{patientDetails.refered_by_name}} </label>
              </c-col>
              <c-col md="2" class="p-2">
                <label class="fw-bold" for="employee_id" cLabel> Assign to </label> <br>
                <label cLabel for="employee_name">{{patientDetails.employee_name}} </label>
              </c-col>
              <c-col md="2" class="p-2">
                <label class="fw-bold" cLabel for="amount">Amount </label> <br>
                <label cLabel for="amount">{{patientDetails.amount}} </label>
              </c-col>
            </form>
          </div>
          <hr />
          <c-col md="3" class="p-2" *ngIf="patientDetails.past_history">
            <label cLabel for="validationDefault01" class="fw-bold">Past History</label> <br>
            <label cLabel for="past_history">{{patientDetails.past_history||"--"}} </label>
          </c-col>
          <hr class="mb-0" />
          <mat-tab-group class="mt-0">
            <mat-tab label="Chief Complaints">
              <div class="col-md-12 table-container">
                <table class="table">
                  <thead class="table-light">
                    <tr>
                      <th scope="col">Sr No</th>
                      <th scope="col">Chief Complaints</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="
                        let item of patientDetails.consultationChiefComplaintsDetails;
                        let i = index
                      ">
                      <th>{{ i + 1 ||"--"}}</th>
                      <td>
                        {{ item?.chief_complaint||"--" }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </mat-tab>
            <mat-tab label="Diagnosis Details">
              <div class="col-md-12 table-container">
                <table class="table">
                  <thead class="table-light">
                    <tr>
                      <th scope="col">Sr No</th>
                      <th scope="col">Diagnosis</th>
                      <th scope="col">Notes</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="
                        let item of patientDetails.consultationDiagnosisDetails;
                        let i = index">
                      <th>{{ i + 1 }}</th>
                      <td>
                        {{ item?.diagnosis_name ||"--"}}
                      </td>
                      <td>
                        {{ item?.notes||"--" }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </mat-tab>
            <mat-tab label="Treatment Details">
              <div class="col-md-12 table-container">
                <table class="table">
                  <thead class="table-light">
                    <tr>
                      <th scope="col">Sr No</th>
                      <th scope="col">Treatment</th>
                      <th scope="col">Notes</th>
                    </tr>
                  </thead>
                  <tbody >
                    <tr *ngFor="
                        let item of patientDetails.consultationTreatmentDetails;
                        let i = index
                      ">
                      <th>{{ i + 1 }}</th>
                      <td>
                        {{ item?.treatment_name||"--" }}
                      </td>
                      <td>
                        {{item.notes||"--"}}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </mat-tab>
            <mat-tab label="Medicine Details">
              <div class="col-md-12 table-container">
                <table class="table">
                  <thead class="table-light">
                    <tr>
                      <th scope="col">Sr No</th>
                      <th scope="col">Medicines</th>
                      <th scope="col">Dosages</th>
                      <th scope="col">Days</th>
                      <th scope="col">Instructions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="
                        let item of patientDetails.consultationMedicineDetails;
                        let i = index
                      ">
                      <th>{{ i + 1 }}</th>

                      <td>
                        {{ item?.medicines_name||"--" }}
                      </td>
                      <td>
                        {{ item?.dosage_name ||"--"}}
                      </td>
                      <td>
                        {{item.days||"--"}}
                      </td>
                      <td>
                        {{ item?.instruction||"--" }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </mat-tab>
            <mat-tab label="File Upload Details">
              <div class="col-md-12 table-container">
                <table class="table">
                  <thead class="table-light">
                    <tr>
                      <th scope="col">Sr No</th>
                      <th scope="col">Image</th>
                      <th scope="col">Notes</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="
                        let item of patientDetails.consultationFileUploadDetails;
                        let i = index
                      ">
                      <th>{{ i + 1 }}</th>
                      <td>
                        <div class="d-flex">
                          <a href="{{(baseUrl +'images/consultationfile/' + item.image_name)||'--' }}" target="_blank" rel="noopener noreferrer">{{ item.image_name }}</a>
                        </div>
                      </td>
                      <td>
                        {{item.notes||"--"}}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </mat-tab>
            <mat-tab label="History">
              <div class="col-md-12">
                <div class="accordion" id="accordionFlushExample">
                  <div class="accordion-item" *ngFor="
                      let item of allConsutlationHistoryList;
                      let i = index
                    ">
                    <h2 class="accordion-header">
                      <button class="accordion-button" type="button" [attr.data-bs-toggle]="'collapse_' + i"
                        [attr.data-bs-target]="'#collapse_' + i" [attr.aria-expanded]="
                          isAccordionOpen === i ? 'true' : 'false'
                        " [attr.aria-controls]="'collapse_' + i" (click)="toggleAccordion(i)">
                        <strong> Date:</strong>
                        <label for="" class="mx-2">{{
                          item.cts | date : "dd-MM-yyyy"
                          }}</label>
                      </button>
                    </h2>
                    <div [id]="'collapse_' + i" class="accordion-collapse collapse"
                      [ngClass]="{ show: isAccordionOpen === i }" aria-labelledby="headingOne"
                      data-bs-parent="#accordionExample">
                      <div class="accordion-body">
                        <div class="mb-4 d-flex justify-content-around">
                          <div>
                            <strong>Past History: </strong>{{ item.past_history ||"--" }}
                          </div>
                        </div>
                        <hr class="mb-0" />

                        <mat-tab-group class="mt-0">
                          <mat-tab label="Chief Complaints">
                            <div class="col-md-12 table-container">
                              <table class="table">
                                <thead class="table-light">
                                  <tr>
                                    <th scope="col">Sr No</th>
                                    <th scope="col">Chief Complaints</th>
                                  </tr>
                                </thead>
                                <tbody >
                                  <ng-container>
                                    <!-- Consultation Diagnosis Details -->
                                    <ng-container *ngFor="
                                        let complaintsDetails of item.consultationChiefComplaintsDetails
                                        let i = index
                                      ">
                                      <tr>
                                        <td>{{ i + 1 }}</td>
                                        <td>{{ complaintsDetails.chief_complaint||"--" }}</td>
                                      </tr>
                                    </ng-container>
                                  </ng-container>
                                </tbody>
                              </table>
                            </div>
                          </mat-tab>
                          <mat-tab label="Diagnosis Details">
                            <div class="col-md-12 table-container">
                              <table class="table">
                                <thead class="table-light">
                                  <tr>
                                    <th scope="col">Sr No</th>
                                    <th scope="col">Diagnosis</th>
                                    <th scope="col">Notes</th>
                                  </tr>
                                </thead>
                                <tbody >
                                  <ng-container>
                                    <!-- Consultation Diagnosis Details -->
                                    <ng-container *ngFor="
                                        let diagnosis of item.consultationDiagnosisDetails
                                        let i = index
                                      ">
                                      <tr>
                                        <td>{{ i + 1 }}</td>
                                        <td>{{ diagnosis.diagnosis_name ||"--"}}</td>
                                        <td>{{ diagnosis.notes ||"--"}}</td>
                                      </tr>
                                    </ng-container>
                                  </ng-container>
                                </tbody>
                              </table>
                            </div>
                          </mat-tab>
                          <mat-tab label="Treatment Details">
                            <div class="col-md-12 table-container">
                              <table class="table">
                                <thead class="table-light">
                                  <tr>
                                    <th scope="col">Sr No</th>
                                    <th scope="col">Treatment</th>
                                    <th scope="col">Notes</th>
                                  </tr>
                                </thead>
                                <tbody >
                                  <ng-container>
                                    <!-- Consultation Treatment Details -->
                                    <ng-container *ngFor="
                                        let treatment of item.consultationTreatmentDetails
                                        let i = index
                                      ">
                                      <tr>
                                        <td>{{ i + 1 }}</td>
                                        <td>{{ treatment.treatment_name ||"--"}}</td>
                                        <td>{{ treatment.notes||"--" }}</td>
                                      </tr>
                                    </ng-container>
                                  </ng-container>
                                </tbody>
                              </table>
                            </div>
                          </mat-tab>
                          <mat-tab label="Medicine Details">
                            <div class="col-md-12 table-container">
                              <table class="table">
                                <thead class="table-light">
                                  <tr>
                                    <th scope="col">Sr No</th>
                                    <th scope="col">Medicines</th>
                                    <th scope="col">Dosages</th>
                                    <th scope="col">Days</th>
                                    <th scope="col">Instructions</th>
                                  </tr>
                                </thead>
                                <tbody >
                                  <ng-container>
                                    <!-- Consultation Medicine Details -->
                                    <ng-container *ngFor="
                                        let medicine of item.consultationMedicineDetails
                                        let i = index
                                      ">
                                      <tr>
                                        <td>{{ i + 1 }}</td>
                                        <td>{{ medicine.medicines_name ||"--"}}</td>
                                        <td>{{ medicine.dosage_name||"--"}}</td>
                                        <td>{{ medicine.days||"--" }}</td>
                                        <td>
                                          {{ medicine.instruction||"--" }}
                                        </td>
                                      </tr>
                                    </ng-container>
                                  </ng-container>
                                </tbody>
                              </table>
                            </div>
                          </mat-tab>
                          <mat-tab label="File Upload Details">
                            <div class="col-md-12 table-container">
                              <table class="table">
                                <thead class="table-light">
                                  <tr>
                                    <th scope="col">Sr No</th>
                                    <th scope="col">Image</th>
                                    <th scope="col">Notes</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <ng-container>
                                    <!-- Consultation File Upload Details -->
                                    <ng-container *ngFor="
                                        let file of item.consultationFileUploadDetails
                                        let i = index
                                      ">
                                      <tr>
                                        <td>
                                          {{ i + 1 }}
                                        </td>
                                        <td>
                                          <a href="{{
                                              (baseUrl +
                                                'images/consultationfile/' +
                                                file.image_name)||'--'
                                            }}" target="_blank" rel="noopener noreferrer">{{ file.image_name ||"--" }}</a>
                                        </td>
                                        <td>{{ file.notes ||"--" }}</td>
                                        <!-- Add more fields as needed -->
                                      </tr>
                                    </ng-container>
                                  </ng-container>
                                </tbody>
                              </table>
                            </div>
                          </mat-tab>
                        </mat-tab-group>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </mat-tab>
          </mat-tab-group>
          <c-col xs="12">
            <button cButton color="primary" [routerLink]="[
                '/doctor',
                { outlets: { doc_Menu: 'doctor-search-patient' } }
              ]">
              Cancel
            </button>
            <button cButton color="primary" class="mx-2" (click)="print()">PRINT <svg cIcon class="me-2 mx-2"
                name="cil-print"></svg></button>

          </c-col>
        </form>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>